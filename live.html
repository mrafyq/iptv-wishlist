<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>IPTV Favoris</title>
        <link rel="stylesheet" href="./css/fonts.css">
        <link rel="stylesheet" href="./css/live.css">
    </head>
    <body>
        <div class="sidebar" id="sidebar">
            <ul class="list-tabs">
                <li class="tab tab-bouquet selected" data-list="list-bouquet">Bouquet</li>
                <li class="tab tab-favoris" data-list="list-favoris">Favoris</li>
            </ul>
            <ul class="list-bouquet" id="sidebar-bouquet__list"></ul>
            <ul class="list-favoris" id="sidebar-favoris__list"></ul>
            <div id="wishlist-buttons" class="wishlist-buttons" style="display: none">
                <div class="action-add"><div class="dot blue"> </div>Ajouter</div>
                <div class="action-move"><div class="dot green"> </div>Déplacer</div>
                <div class="action-delete"><div class="dot red"> </div>Supprimer</div>
                <div class="action-rename"><div class="dot white"> </div>Renommer</div>
                <div class="action-pin"><div class="dot yellow"> </div>Verrouiller</div>
            </div>
            <div id="buckets-buttons" class="bucket-buttons" style="display: none">
                <div class="bucket-action-hide"><div class="dot blue"> </div>Masquer</div>
                <div class="bucket-action-pin"><div class="dot yellow"> </div>Verrouiller</div>
            </div>
        </div>
        
        <div class="screen">
            <div class="left">
                <div class="left-up">
                    <div class="group-name">Group Name</div>
                    <div id="searchForm">search <input id="search" type="text" placeholder="Search..." title="Search..."><i class="fa fa-search"></i></div>
                </div>
                <!-- attribute data-attr-back-list added for manage arrowLeft key-->
                <ul id="list-channels" class="list-channels" style="display: flex"></ul>
            </div>
            <div class="right">
                <div class="date"> 19:54 | Fri Jun 23 2023</div>
                <div class="player"></div>
                <div class="epg">
                    <div>
                        7:50 PM - 8:00 PM C'est Canteloup
                    </div>
                    <div>
                        <progress value="46" max="100"></progress>
                    </div>
                    <ul>
                        <li>8:10 PM	Koh-Lanta, le totem maudi</li>
                        <li>10:30 PM	Et alors ?</li>
                        <li>12:00 PM	C'est Canteloup</li>
                        <li>13:10 PM	Koh-Lanta, le totem maudit</li>
                    </ul>
                </div>
                <div class="buttons" id="right-buttons">
                    <div>
                        <div class="dot green"></div> EPG guide
                    </div>
                    <div>
                        <div class="dot yellow"></div> Control parental
                    </div>
                    <!-- Add to Favoris -->
                    <div class="add-to-favoris">
                        <div class="dot blue"></div> Déplacer vers
                    </div>
                    <!-- Remove from Favoris -->
                    <div class="remove-from-favoris">
                        <div class="dot red"></div> Retirer de favoris
                    </div>
                    <div>
                        <div class="dot white"></div> Trier <span class="sortBy"></span>
                    </div>
                    <div>
                        <div class="dot white"></div> Déplacer (6)</span>
                    </div>
                </div>
            </div>
        </div>
        <!-- Popup -->
        <div class="popup popup-rename">
            <div class="popup-inner">
                <div class="popup-content">
                    <form>
                        <div class="popup-title">Renommer le favoris: <strong></strong></div>
                        <br>
                        <input type="text" id="rename" name="rename" placeholder="Nom de favoris souhaité ... ">
                        <br>
                        <br>
                        <div>
                            <button type="submit" class="action-rename-save">Enregistrer</button>
                            <button type="button" class="btn-cancel" data-popup="popup-rename">Annuler</button>
                        </div>
                    </form>
                </div>
                <div class="popup-success">
                    <div class="popup-success-inner">
                        <i class="icon-check-success"></i>
                        <div>Success !</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup popup-delete">
            <div class="popup-inner">
                <div class="popup-content">
                    <form>
                        <div class="popup-title">Supprimer le favoris: <strong></strong></div>
                        <div>
                            <button type="submit" class="action-delete-confirm">Confirmer la suppression</button>
                            <button type="button" class="btn-cancel" data-popup="popup-delete">Annuler</button>
                        </div>
                    </form>
                </div>
                <div class="popup-success">
                    <div class="popup-success-inner">
                        <i class="icon-check-success"></i>
                        <div>Success !</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup popup-favoris">
            <div class="popup-inner">
                <div class="popup-content">
                    <form>
                        <div class="popup-title">Ajouter au favoris</div>
                        <div class="popup-favoris-name"></div>
                        <ul class="popup-favoris-list-fav" id="popup-favoris-list-fav"></ul>
                        <button type="submit">Enregistrer</button>
                        <button type="button" class="btn-cancel" data-popup="popup-favoris">Annuler</button>
                    </form>
                </div>
                <div class="popup-success">
                    <div class="popup-success-inner">
                        <i class="icon-check-success"></i>
                        <div>Success !</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup popup-add-wishlist">
            <div class="popup-inner">
                <div class="popup-content">
                    <div class="popup-title">Ajouter un nouveau favoris</div>
                    <form id="add-wishlist-form" name="add-wishlist-form">
                        <input type="text" id="add" name="favoris_name" minlength="3" required
                               title="Définir le nom de favoris" placeholder="Définir le nom de favoris">
                        <button type="submit">Enregistrer</button>
                        <button type="button" class="btn-cancel" data-popup="popup-add-wishlist">Annuler</button>
                    </form>
                </div>
                <div class="popup-success">
                    <div class="popup-success-inner">
                        <i class="icon-check-success"></i>
                        <div>Success !</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup popup-remove-from-wishlist">
            <div class="popup-inner">
                <div class="popup-content">
                    <form id="remove-from-wishlist-form" name="remove-from-wishlist-form">
                        <div class="popup-title"></div>
                        <button type="submit">Yes</button>
                        <button type="button" class="btn-cancel" data-popup="popup-remove-from-wishlist">Annuler</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="popup popup-check-pin-favoris">
            <div class="popup-inner">
                <div class="popup-content">
                    <form>
                        <div class="popup-title">Pin/Unpin - Entrer votre PIN</div>
                        <br>
                        <input id="pin-field-favoris" type="password" class="field" placeholder="0000" title="Entrer votre PIN"/>
                        <div>
                            <button type="submit">OK</button>
                            <button type="button" class="btn-cancel" data-popup="popup-check-pin-favoris">Annuler</button>
                        </div>
                    </form>
                </div>
                <div class="popup-success">
                    <div class="popup-success-inner">
                        <i class="icon-check-success"></i>
                        <div>Success !</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup popup-check-pin-buckets">
            <div class="popup-inner">
                <div class="popup-content">
                    <form>
                        <div class="popup-title">Pin/Unpin - Entrer votre PIN</div>
                        <br>
                        <input id="pin-field-bucket" type="password" class="field" placeholder="0000" title="Entrer votre PIN"/>
                        <div>
                            <button type="submit">OK</button>
                            <button type="button" class="btn-cancel" data-popup="popup-check-pin-buckets">Annuler</button>
                        </div>
                    </form>
                </div>
                <div class="popup-success">
                    <div class="popup-success-inner">
                        <i class="icon-check-success"></i>
                        <div>Success !</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup popup-check-pin-hide-buckets">
            <div class="popup-inner">
                <div class="popup-content">
                    <form>
                        <div class="popup-title">Masquer - Entrer votre PIN</div>
                        <br>
                        <input id="pin-hide-field-bucket" type="password" class="field" placeholder="0000" title="Entrer votre PIN"/>
                        <div>
                            <button type="submit">OK</button>
                            <button type="button" class="btn-cancel" data-popup="popup-check-pin-hide-buckets">Annuler</button>
                        </div>
                    </form>
                </div>
                <div class="popup-success">
                    <div class="popup-success-inner">
                        <i class="icon-check-success"></i>
                        <div>Success !</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup popup-check-pin-access">
            <div class="popup-inner">
                <div class="popup-content">
                    <form>
                        <div class="popup-title">Entrer votre PIN</div>
                        <br>
                        <input id="pin-field" type="password" class="field" placeholder="0000" title="Entrer votre PIN"/>
                        <div>
                            <button type="submit">OK</button>
                            <button type="button" class="btn-cancel" data-popup="popup-check-pin-access">Annuler</button>
                        </div>
                    </form>
                </div>
                <!-- remove popup success for pin access -->
                <!-- add popup error if we have it -->
            </div>
        </div>
        <script type="text/javascript" src="js/data.js"></script>
        <script type="text/javascript">
            var listFav = document.getElementById('sidebar-favoris__list');
            var listBouquet = document.getElementById('sidebar-bouquet__list');
            var listChannels0 = document.getElementById('list-channels');
            var popupFavList = document.getElementById('popup-favoris-list-fav');

            read().then(data => {
                if (data) {
                    (data.favoris).forEach((element, index) => {
                        const li = document.createElement('li');
                        li.setAttribute('id', element.favori_id);
                        li.setAttribute('data-name', element.favori_name);
                        li.setAttribute('data-pin', element.pin);
                        li.setAttribute('data-order', element.order);
                        li.setAttribute('class', 'favoris');
                        li.style.order = element.order;
                        li.innerHTML = element.favori_name;
                        if (element.pin) {
                            const iconLock = document.createElement('i');
                            iconLock.setAttribute('class', 'icon-lock');
                            li.appendChild(iconLock);
                        }
                        listFav.appendChild(li);
                    });
                    (data.bouquets).forEach((element, index) => {
                        if (!element.hidden) {
                            const li = document.createElement('li');
                            li.setAttribute('id', element.bouquet_id);
                            li.setAttribute('data-name', element.bouquet_name);
                            li.setAttribute('data-pin', element.pin);
                            li.setAttribute('class', 'bouquet');
                            li.innerHTML = element.bouquet_name;
                            if (element.pin) {
                                const iconLock = document.createElement('i');
                                iconLock.setAttribute('class', 'icon-lock');
                                li.appendChild(iconLock);
                            }
                            listBouquet.appendChild(li);
                        }
                    });
                }
            });
        </script>
        <script type="text/javascript" src="live.js"></script>
        <script type="text/javascript" src="js/wishlist/add.js"></script>
        <script type="text/javascript" src="js/wishlist/move.js"></script>
        <script type="text/javascript" src="js/wishlist/edit.js"></script>
        <script type="text/javascript" src="js/wishlist/delete.js"></script>
        <script type="text/javascript" src="js/wishlist/pin.js"></script>
        <script type="text/javascript" src="js/bucket/pin.js"></script>
        <script type="text/javascript" src="js/bucket/hide.js"></script>
        <script type="text/javascript" src="js/channel/move.js"></script>
    </body>
</html>